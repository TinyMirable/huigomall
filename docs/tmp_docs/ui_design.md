# 前端界面设计需求文档

## 一、通用设计原则

- 采用响应式设计，适配不同屏幕尺寸（桌面端为主，移动端基本适配）
- 遵循DaisyUI设计规范，保持界面风格统一
- 界面简洁直观，操作流程清晰
- 支持中文界面
- **通用界面元素**：
  - 顶部导航栏：Logo、用户信息、购物车图标、退出登录
  - 底部页脚：版权信息、联系方式
  - 错误提示：统一的错误消息显示样式
  - 成功提示：操作成功后的提示信息
  - 加载状态：数据加载时的loading动画

---

## 二、用户端界面（顾客）

### 1. 首页

**功能要求**：
- 商品分类导航
- 热门商品展示
- 轮播图
- 导航栏（Logo、用户信息、购物车图标、退出登录）
- 底部页脚

### 2. 登录/注册页

**功能要求**：
- 登录方式选择：密码登录 / 短信验证码登录
- 注册方式选择：手机号注册 / 邮箱注册（二选一）
- 手机号/邮箱输入框（格式验证）
- 密码输入框（密码强度提示：至少8位，包含字母和数字）
- 验证码输入框（6位数字，有效期10分钟）
- 获取验证码按钮（倒计时功能）
- 图片验证码（次优先级P2，第一阶段可选）
- 忘记密码链接
- 注册/登录按钮
- 错误提示显示

**业务规则**：
- 验证码有效期为10分钟，验证码为6位数字
- 密码强度要求：至少8位，包含字母和数字
- 登录失败5次后锁定30分钟

### 3. 忘记密码页

**功能要求**：
- 手机号/邮箱输入框
- 获取验证码按钮
- 验证码输入框
- 新密码输入框
- 确认密码输入框
- 重置密码按钮
- 返回登录链接

### 4. 商品列表页

**功能要求**：
- 商品卡片展示（商品图片、名称、价格、库存、店铺信息）
- 分类筛选功能
- 店铺筛选功能（可选）
- 排序功能（价格升序/降序、销量、上架时间）- 优先级P2
- 分页显示（每页20条）
- 只显示上架状态的商品
- 库存为0的商品显示"无货"状态
- 点击店铺信息，跳转到店铺商品列表页

**业务规则**：
- 默认按最新上架时间排序
- 只展示上架状态的商品给普通用户，下架商品不可见
- 商品下架和库存为0是两个独立的状态
- 支持显示店铺信息，点击店铺只能看到该店铺的商品

### 5. 商品详情页

**功能要求**：
- 商品图片展示（支持多图）
- 商品名称
- 商品价格
- 库存显示
- 库存预警提示（库存≤50时显示）
- 商品描述
- 商品分类
- 店铺信息（店铺名称，可点击跳转到店铺页面）
- 数量选择器
- "加入购物车"按钮（需登录验证）
- "立即购买"按钮（需登录验证）
- 库存为0时显示"无货"，无法下单
- 商品下架时显示"已下架"，无法下单

**业务规则**：
- 库存≤50时显示库存预警提示
- 库存为0的商品不能购买，显示"无货"状态
- 商品下架后，用户仍可通过查找功能找到商品，但无法下单
- 支持显示店铺信息，点击店铺只能看到该店铺的商品

### 6. 购物车页

**功能要求**：
- 购物车商品列表（商品图片、名称、价格、数量）
- 商品数量修改功能（验证库存）
- 删除商品功能
- 商品总金额显示
- 库存不足提示（当商品库存变化时）
- "结算"按钮（选择商品进行结算）
- 购物车为空时的提示

**业务规则**：
- 购物车信息持久化存储到数据库
- 用户登录后自动加载购物车历史记录
- 修改数量时验证库存
- 防止添加库存不足的商品到购物车

### 7. 订单确认页

**功能要求**：
- 订单商品信息展示（商品快照：名称、价格、图片、数量，按店铺分组显示）
- 店铺信息显示（订单包含的店铺列表）
- 收货地址选择（下拉选择或添加新地址）
- 添加收货地址入口
- 优惠券选择功能（显示可用优惠券列表，8折优惠券）
- 订单金额显示（原价、优惠金额、优惠后价格）
- 支付方式选择（微信/支付宝）
- "提交订单"按钮
- 库存不足时的错误提示

**业务规则**：
- 订单可以包含不同店铺的商品，订单项按店铺区分
- 订单创建时保存商品快照和收货地址快照
- 优惠券为8折优惠，可应用于所有商品
- 显示订单原价和优惠后价格
- 订单提交时检查库存，库存不足则订单创建失败

### 8. 支付页面

**功能要求**：
- 订单信息展示（订单号、商品信息、金额）
- 支付方式选择（微信/支付宝）
- 支付二维码展示（或跳转支付页面）
- 支付状态提示（支付中、支付成功、支付失败）
- 支付倒计时提示（30分钟未支付自动取消）
- 返回订单详情按钮

**业务规则**：
- 使用支付平台沙箱环境进行测试（第一阶段）
- 以支付平台回调结果为准，前端支付页结果仅作参考
- 订单创建后30分钟内未支付，系统自动取消订单

### 9. 订单列表页（我的订单）

**功能要求**：
- 订单列表展示（订单号、商品信息、订单状态、创建时间、订单金额）
- 订单状态筛选（待付款、已付款、待发货、已发货、运输中、已送到、已完成、已取消、已退款）
- 订单详情入口
- 订单操作按钮（取消订单、确认收货、申请退款等，根据订单状态显示）

**业务规则**：
- 用户只能查看自己的订单
- 订单状态包括：待付款、已付款、待发货、已发货、运输中、已送到、已完成、已取消、已退款

### 10. 订单详情页

**功能要求**：
- 订单完整信息展示：
  - 订单号
  - 订单状态（待付款、已付款、待发货、已发货、运输中、已送到、已完成、已取消、已退款）
  - 订单创建时间
  - 商品列表（商品快照：名称、价格、图片、数量）
  - 收货地址（地址快照）
  - 订单金额（原价、优惠金额、实付金额）
  - 支付信息（支付方式、支付时间、交易号）
- 订单操作按钮：
  - 取消订单（仅"待付款"和"待发货"状态）
  - 确认收货（"已送到"状态）
  - 申请退款（"已付款"、"待发货"、"已发货"、"运输中"、"已送到"状态，且订单完成7天内）
- 退款信息展示（如有退款申请：退款原因、退款状态、拒绝原因等）

**业务规则**：
- 订单创建时保存商品快照和收货地址快照
- 只有"待付款"和"待发货"状态的订单可以取消
- 用户可在"已送到"状态主动确认收货
- 如果用户未主动确认，系统在订单状态变为"已送到"后24小时自动更新订单状态为"已完成"
- 支持7天无理由退款规则，订单完成7天内可申请退款

### 11. 申请退款页（弹窗或独立页面）

**功能要求**：
- 退款原因选择（下拉选择）
- 退款说明输入框（可选）
- 提交退款申请按钮
- 取消按钮

**业务规则**：
- 退款申请状态：待审核、已同意、已拒绝
- 退款申请提交成功后，系统管理员在配置的时间内（默认2分钟）未确认，则自动同意退款

### 12. 个人中心页

**功能要求**：
- 个人信息展示（昵称、手机号、邮箱、头像等）
- 编辑个人信息入口
- 修改密码入口
- 订单管理入口（跳转到订单列表页）
- 收货地址管理入口
- 优惠券查看入口（可选）
- 申请成为商家入口（如果还不是商家）
- 商家后台入口（如果是商家）
- 退出登录按钮

**业务规则**：
- 用户可以通过个人中心申请成为商家

### 13. 个人信息编辑页

**功能要求**：
- 昵称输入框
- 头像上传/修改（可选）
- 手机号显示（如需修改需验证）
- 邮箱显示（如需修改需验证）
- 保存按钮
- 取消按钮

**业务规则**：
- 手机号和邮箱修改需验证码验证

### 14. 修改密码页

**功能要求**：
- 原密码输入框
- 新密码输入框（密码强度提示）
- 确认密码输入框
- 获取验证码按钮（手机或邮箱）
- 验证码输入框
- 修改密码按钮
- 取消按钮

**业务规则**：
- 需验证原密码和验证码
- 密码强度要求：至少8位，包含字母和数字

### 15. 收货地址管理页

**功能要求**：
- 地址列表展示（收货人、联系电话、详细地址、默认地址标识）
- 添加地址按钮
- 编辑地址功能（每个地址有编辑按钮）
- 删除地址功能（每个地址有删除按钮，删除前需确认）
- 设置默认地址功能
- 地址为空时的提示

**业务规则**：
- 用户地址列表可以为空，可以删除最后一个地址
- 地址不进行真实性验证（第一阶段）
- 删除地址操作需记录审计日志

### 16. 添加/编辑地址页（弹窗或独立页面）

**功能要求**：
- 收货人姓名输入框
- 联系电话输入框（手机号格式验证）
- 详细地址输入框
- 设为默认地址复选框
- 保存按钮
- 取消按钮

**业务规则**：
- 联系电话格式验证（手机号格式）

### 17. 优惠券列表页（可选，或在个人中心展示）

**功能要求**：
- 优惠券列表展示（优惠券类型、折扣、数量、使用状态）
- 可用优惠券数量显示
- 已使用优惠券显示

**业务规则**：
- 每个新注册用户自动获得10张8折优惠券
- 优惠券使用后扣除一张，未使用的优惠券保留

### 18. 申请成为商家页

**功能要求**：
- 商家信息表单：
- 店铺名称
- 店铺描述
- 提交申请按钮
- 取消按钮
- 表单验证提示

**业务规则**：
- 用户可以通过申请成为商家
- 如果管理员开启了审核，商家申请进入待审核状态；否则直接通过
- 商家申请通过后，用户获得商家权限，可以创建店铺

### 19. 店铺商品列表页

**功能要求**：
- 店铺信息展示（店铺名称、描述）
- 商品列表展示（该店铺的商品，商品图片、名称、价格、库存）
- 分类筛选功能
- 排序功能（价格升序/降序、销量、上架时间）
- 分页显示（每页20条）
- 只显示上架状态的商品

**业务规则**：
- 点击店铺信息，系统展示该店铺的商品列表
- 只展示上架状态的商品

---

## 三、管理端界面（系统管理员）

### 20. 管理后台首页（可选）

**功能要求**：
- 导航菜单（商家管理、店铺管理、商品分类管理、订单管理、销售报表、审计日志）
- 用户信息显示
- 退出登录按钮

### 21. 商家管理页

**功能要求**：
- 商家列表展示（所有商家，包括正常、禁用状态）
- 商家信息：商家名称、负责人、状态、注册时间
- 商家审核开关配置（开启审核/不审核）
- 待审核商家列表（如果开启了审核）
- 商家审核功能（同意/拒绝按钮）
- 商家状态管理（启用/禁用按钮）
- 搜索功能（商家名称搜索）

**业务规则**：
- 系统管理员可以审核商家申请（同意或拒绝）
- 系统管理员可以设置商家审核开关（开启审核/不审核，默认不审核）
- 系统管理员可以管理商家状态（启用/禁用）
- 商家被禁用后，无法登录商家后台

### 22. 店铺管理页

**功能要求**：
- 所有店铺列表展示（店铺名称、所属商家、状态、创建时间）
- 店铺审核开关配置（开启审核/不审核，默认不审核）
- 待审核店铺列表（如果开启了审核）
- 店铺审核功能（同意/拒绝按钮）
- 店铺状态管理（启用/禁用按钮）
- 搜索功能（店铺名称、商家名称搜索）

**业务规则**：
- 系统管理员可以设置店铺创建审核开关（开启审核/不审核，默认不审核）
- 系统管理员可以管理所有店铺状态（启用/禁用）
- 店铺被禁用后，店铺的商品不可见，无法下单

### 23. 商品分类管理页

**功能要求**：
- 全局商品分类树展示
- 添加分类按钮
- 编辑分类按钮
- 删除分类按钮（删除前需确认）
- 分类树结构管理（支持多级分类）

**业务规则**：
- 系统管理员可以管理全局商品分类（增删改查）
- 系统管理员可以管理商家创建的商品分类

### 24. 订单管理页

**功能要求**：
- 所有订单列表展示（订单号、用户信息、商品信息、订单状态、创建时间、订单金额）
- 订单状态筛选（所有状态）
- 订单详情查看入口
- 退款审核入口（显示待审核的退款申请）

**业务规则**：
- 系统管理员可以查看所有订单
- 当前阶段订单状态全部由系统自动更新

### 25. 订单详情页（管理端）

**功能要求**：
- 订单完整信息展示（同用户端订单详情页）
- 退款审核功能（如有退款申请：同意/拒绝按钮，拒绝原因输入框）

**业务规则**：
- 系统管理员可以审核所有退款申请（同意或拒绝）
- 退款审核操作需记录审计日志

### 26. 销售报表页

**功能要求**：
- 全平台总体统计数据展示：
  - 总销售额（数字卡片，所有店铺汇总）
  - 总订单数（数字卡片，所有店铺汇总）
  - 总商品销量（数字卡片，所有店铺汇总）
- 过去一个月趋势图表：
  - 销售额趋势折线图（全平台）
  - 订单数趋势折线图（全平台）
  - 商品销量趋势折线图（全平台）
- 日期范围选择器（按中国北京时区）
- 数据实时更新

**业务规则**：
- 系统管理员可以查看全平台销售报表（所有店铺数据汇总）
- 总销售额统计排除已退款订单和已取消订单
- 总订单数统计排除已取消订单和已退款订单
- 总商品销量统计排除已退款订单和已取消订单
- 时间维度统计按中国北京时区

### 27. 操作审计日志页

**功能要求**：
- 审计日志列表展示：
  - 操作人ID、操作人姓名
  - 操作时间
  - 操作类型（商家审核、店铺审核、商品分类管理、修改商品价格、修改库存、删除商品、删除地址等）
  - 操作对象（商家ID、店铺ID、商品ID、订单号、地址ID等）
  - 操作内容（原值、新值等）
  - 操作结果
- 操作类型筛选
- 操作人筛选
- 时间范围筛选
- 分页显示
- 日志不可删除和修改，仅支持查询

**业务规则**：
- 记录系统管理员的所有敏感操作（商家审核、店铺审核、商品分类管理、订单查看等）
- 记录商家的敏感操作（修改商品价格、修改库存、删除商品、店铺管理等）
- 记录用户删除收货地址的操作
- 系统管理员可以查看所有操作审计日志
- 审计日志不可删除和修改，仅支持查询

---

## 四、商家端界面（商家）

### 28. 商家后台首页（可选）

**功能要求**：
- 导航菜单（店铺管理、商品管理、订单管理、销售报表、审计日志）
- 用户信息显示
- 退出登录按钮

### 29. 店铺管理页

**功能要求**：
- 店铺列表展示（店铺名称、状态、创建时间，最多3个）
- 创建店铺按钮（检查店铺数量限制）
- 编辑店铺按钮（每个店铺）
- 删除店铺按钮（每个店铺，删除前需确认）
- 店铺状态管理（启用/禁用按钮）
- 店铺信息：店铺名称、描述、状态

**业务规则**：
- 一个商家最多可以开设3个店铺
- 店铺的修改、删除权限由商家自行决定，不需要审核
- 店铺的状态管理员和商家都可以管理
- 店铺被禁用后，店铺的商品不可见，无法下单

### 30. 店铺编辑页（添加/编辑共用）

**功能要求**：
- 店铺信息表单：
  - 店铺名称（必填）
  - 店铺描述（可选）
- 保存按钮
- 取消按钮
- 表单验证提示

**业务规则**：
- 店铺创建可以被管理员设置审核或者不审核（默认不审核）
- 如果开启了审核，店铺创建后进入待审核状态

### 31. 商品管理页（商家端）

**功能要求**：
- 店铺选择器（选择要管理的店铺）
- 商品列表展示（所选店铺的商品，包括上架、下架状态）
- 商品信息：名称、价格、库存、分类、上架状态
- 库存预警提示（库存≤50的商品高亮显示）
- 搜索功能（商品名称搜索）
- 添加商品按钮
- 编辑商品按钮（每个商品）
- 删除商品按钮（每个商品，删除前需确认）
- 上架/下架切换功能
- 商品分类筛选（可选）

**业务规则**：
- 商家可以管理自己所有店铺的商品
- 商品必须关联到店铺
- 库存≤50时显示库存预警
- 删除商品操作需记录审计日志
- 新添加商品默认为下架状态
- 商品的创建可以被管理员设置审核或者不审核（默认不审核）

### 32. 商品编辑页（商家端，添加/编辑共用）

**功能要求**：
- 店铺选择（必选，商品必须关联到店铺）
- 商品信息表单：
  - 商品名称（必填）
  - 商品价格（必填，正数验证）
  - 商品库存（必填，非负整数验证）
  - 商品分类（必填，下拉选择，支持创建新分类）
  - 商品描述（可选）
  - 商品图片URL（格式验证）
- 上架/下架状态选择（新商品默认为下架）
- 保存按钮
- 取消按钮
- 表单验证提示

**业务规则**：
- 商品价格应为正数，库存应为非负整数
- 商品图片URL应进行格式验证
- 新添加商品默认为下架状态
- 修改商品价格和库存操作需记录审计日志
- 商家可以创建商品分类

### 33. 订单管理页（商家端）

**功能要求**：
- 店铺选择器（选择要查看的店铺）
- 订单列表展示（所选店铺的订单，订单号、用户信息、商品信息、订单状态、创建时间、订单金额）
- 订单状态筛选（所有状态）
- 订单详情查看入口
- 退款审核入口（显示待审核的退款申请）

**业务规则**：
- 商家只能查看自己店铺的订单
- 订单项按店铺区分，商家只能看到自己店铺的订单项
- 当前阶段订单状态全部由系统自动更新

### 34. 订单详情页（商家端）

**功能要求**：
- 订单完整信息展示（仅显示该商家店铺的订单项）
- 退款审核功能（如有退款申请：同意/拒绝按钮，拒绝原因输入框）

**业务规则**：
- 商家只能看到自己店铺的订单项
- 商家可以审核自己店铺的退款申请（同意或拒绝）
- 退款审核操作需记录审计日志

### 35. 销售报表页（商家端）

**功能要求**：
- 店铺选择器（选择要查看的店铺）
- 店铺统计数据展示：
  - 总销售额（数字卡片，仅所选店铺）
  - 总订单数（数字卡片，仅所选店铺）
  - 总商品销量（数字卡片，仅所选店铺）
- 过去一个月趋势图表：
  - 销售额趋势折线图（所选店铺）
  - 订单数趋势折线图（所选店铺）
  - 商品销量趋势折线图（所选店铺）
- 日期范围选择器（按中国北京时区）
- 数据实时更新

**业务规则**：
- 商家只能查看自己店铺的销售报表
- 总销售额统计排除已退款订单和已取消订单
- 总订单数统计排除已取消订单和已退款订单
- 总商品销量统计排除已退款订单和已取消订单
- 时间维度统计按中国北京时区

### 36. 操作审计日志页（商家端）

**功能要求**：
- 审计日志列表展示（仅显示该商家的操作）：
  - 操作人ID、操作人姓名
  - 操作时间
  - 操作类型（修改商品价格、修改库存、删除商品、店铺管理等）
  - 操作对象（商品ID、店铺ID等）
  - 操作内容（原值、新值等）
  - 操作结果
- 操作类型筛选
- 时间范围筛选
- 分页显示
- 日志不可删除和修改，仅支持查询

**业务规则**：
- 商家可以查看自己的操作历史
- 记录商家的敏感操作（修改商品价格、修改库存、删除商品、店铺管理等）
- 审计日志不可删除和修改，仅支持查询

---

## 四、界面交互要求

### 通用交互

- 所有表单提交前进行前端验证
- 所有删除操作前显示确认对话框
- 所有异步操作显示loading状态
- 操作成功/失败显示统一提示
- 未登录用户访问需要登录的页面时，跳转到登录页

### 特殊交互

- **购物车**：商品库存变化时实时更新可用性提示
- **订单**：30分钟未支付倒计时提示
- **订单**：24小时自动确认收货倒计时提示（已送到状态）
- **验证码**：获取验证码后显示倒计时（60秒或10分钟）
- **支付**：支付成功后自动跳转或显示成功提示
- **退款**：退款申请提交后显示审核状态

---

## 五、界面状态要求

### 订单状态显示

- **待付款**：显示"待付款"，可取消
- **已付款**：显示"已付款"
- **待发货**：显示"待发货"，可取消
- **已发货**：显示"已发货"
- **运输中**：显示"运输中"
- **已送到**：显示"已送到"，可确认收货
- **已完成**：显示"已完成"
- **已取消**：显示"已取消"，显示取消原因
- **已退款**：显示"已退款"

### 商品状态显示

- **上架**：正常显示，可购买
- **下架**：显示"已下架"，无法下单
- **库存为0**：显示"无货"，无法下单
- **库存≤50**：显示库存预警提示

### 退款状态显示

- **待审核**：显示"待审核"
- **已同意**：显示"已同意"
- **已拒绝**：显示"已拒绝"，显示拒绝原因

---

## 六、响应式设计要求

- **桌面端（≥1024px）**：完整功能展示
- **平板端（768px-1023px）**：适配布局
- **移动端（<768px）**：基本功能可用，简化布局

---

## 七、技术实现要求

### 前端技术栈

- **框架**：Vue 3 + TypeScript + Vite
- **UI组件库**：DaisyUI
- **状态管理**：Pinia/Vuex
- **路由**：Vue Router
- **HTTP客户端**：Axios
- **图表库**：用于销售报表的折线图展示（如ECharts、Chart.js等）

### 开发规范

- 遵循Vue 3 Composition API规范
- 使用TypeScript进行类型定义
- 组件化开发，提高代码复用性
- 统一的错误处理和提示机制
- 统一的loading状态管理
- 统一的表单验证规则

---

## 八、界面优先级

### P1（高优先级，第一阶段必须实现）

- 所有用户端界面（1-17）
- 所有管理端界面（18-24）

### P2（中优先级，基础功能实现后）

- 商品排序功能
- 图片验证码功能（可选）

### P3（低优先级，第一阶段不实现）

- 商品搜索功能
- 商品收藏功能
- 推荐区/热门商品功能

---

## 九、参考文档

- [SRS文档](./srs.md) - 系统需求规格说明
- [DaisyUI文档](https://daisyui.com/) - UI组件库文档
- [Vue 3文档](https://vuejs.org/) - Vue框架文档

